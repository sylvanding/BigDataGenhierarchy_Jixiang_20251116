### 1. 建树：

#### 首先，项目以构建索引模式启动-bi，

项目的入口类：app.Application


```

    /**
     * 整个程序的入口函数
     * -bi (buildIndex) 以构建索引模式启动
     * -qi (queryIndex) 以搜索索引模式启动
     * -c  (cluster) 以聚类分析模式启动
     * -t  (tool) 以度量空间分析工具类模式启动
     * @param args
     */

    public static void main(String[] args) {
        long startTime = System.currentTimeMillis();
        printWelcome();
        if (args.length<1) {
            System.out.println("输入参数有误！输入-h查看帮助！");
            System.exit(-1);
        }
        String mode = args[0];
        Scanner scanner = new Scanner(System.in);
        String line = null;
        String[] subArgs = null;
        switch (mode.toLowerCase()){
            case "-bi":
                System.out.println("当前位于构建索引模式，可用参数为：");
                promptForBuildIndex();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseBuildIndexArgs(subArgs);
                executeIndexBuilder();
                break;
            case "-qi":
                System.out.println("当前位于查询索引模式，可用参数为：");
                promptForIndexQuery();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseIndexQueryArgs(subArgs);
                executeIndexQuery();
                break;
            case "-c":
                System.out.println("当前位于聚类分析模式，可用参数为：");
                promptForCluster();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseClusterArgs(subArgs);
                executeCluster();
                break;
            case "-t":
                System.out.println("通过该工具可以将数据映射到支撑点空间之中！");
                promptForTool();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseToolArgs(subArgs);
                executeTool();
                break;
            case "-h":
                modePrompt();
                break;
            default:
                System.out.println("输入参数有误！");
                modePrompt();
        }

        long endTime = System.currentTimeMillis();
        System.out.println("耗时共： " + (endTime - startTime) + "ms");
    }

```

#### 其次，输入构建索引参数：
示例：
```
-tm vector -f [filename] -n 1000 -d 2 -i cp -psm fft -pn 2 -t vector -pm BALANCED -maxleaf 10 -normalvectorcandidatesource 1111 -isfilternormalvectorset true -isquerysetextensionr true
```

```

-tm [tableManager名称]
-f [数据文件的路径]
-n [数据文件中数据的个数]
-d [数据的维度]
-i [索引的类型：vp、gh、kmp，默认i=vp]
-psm [支撑点选择方法：random、fft、center,默认psm=fft]
-pn [支撑点个数，默认pn=3，对于GH树等支撑点个数固定的索引结构，该参数无效]
-t [数据类型：ms、msms、dns、rna、protein、vector、image，默认t=vector]
* -pm [划分方法：balance、clusteringKMeans,默认m=balance,目前该参数仅对VP树生效]
-pbn [划分的块数，默认为3,对于GH树等划分块数固定的索引结构，该参数无效]
-maxLeaf [最大叶子大小，默认maxLeaf=10]
-m [建树的模式：local、global、mix，默认local]
-pf [支撑点文件名，该参数可以指定建树时使用的支撑点。参数只在global建树模式下生效，如果该参数不为空，则传入的支撑点选择方法无效]
-h [帮助文档]
-vectorcandidatemod [法向量组候选集来源。默认为“1111”，分别代表法向量候选集为PCA+VP+CGH+球面上均匀向量]
-isfilter [判断是否需要进行法向量组筛选，默认为true]
-isQuerySetOpt [判断是否进行查询集r-邻域扩展优化，默认为true]

```

其中，完全线性划分模块新添的构建索引的参数如下所示：
```
-vectorcandidatemod [法向量组候选集来源。默认为“1111”，分别代表法向量候选集为PCA+VP+CGH+球面上均匀向量]
-isfilter [判断是否需要进行法向量组筛选，默认为true]
-isQuerySetOpt [判断是否进行查询集r-邻域扩展优化，默认为true]
```


#### 最后，执行建树过程  executeIndexBuilder();


### 2. 范围搜索：
#### 首先，项目以构建索引模式启动-qi，

项目的入口类：app.Application


```

    /**
     * 整个程序的入口函数
     * -bi (buildIndex) 以构建索引模式启动
     * -qi (queryIndex) 以搜索索引模式启动
     * -c  (cluster) 以聚类分析模式启动
     * -t  (tool) 以度量空间分析工具类模式启动
     * @param args
     */

    public static void main(String[] args) {
        long startTime = System.currentTimeMillis();
        printWelcome();
        if (args.length<1) {
            System.out.println("输入参数有误！输入-h查看帮助！");
            System.exit(-1);
        }
        String mode = args[0];
        Scanner scanner = new Scanner(System.in);
        String line = null;
        String[] subArgs = null;
        switch (mode.toLowerCase()){
            case "-bi":
                System.out.println("当前位于构建索引模式，可用参数为：");
                promptForBuildIndex();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseBuildIndexArgs(subArgs);
                executeIndexBuilder();
                break;
            case "-qi":
                System.out.println("当前位于查询索引模式，可用参数为：");
                promptForIndexQuery();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseIndexQueryArgs(subArgs);
                executeIndexQuery();
                break;
            case "-c":
                System.out.println("当前位于聚类分析模式，可用参数为：");
                promptForCluster();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseClusterArgs(subArgs);
                executeCluster();
                break;
            case "-t":
                System.out.println("通过该工具可以将数据映射到支撑点空间之中！");
                promptForTool();
                System.out.println("请按照要求输入参数(空格分隔，回车键提交)：\n");
                line = scanner.nextLine();
                subArgs = line.split(" ");
                parseToolArgs(subArgs);
                executeTool();
                break;
            case "-h":
                modePrompt();
                break;
            default:
                System.out.println("输入参数有误！");
                modePrompt();
        }

        long endTime = System.currentTimeMillis();
        System.out.println("耗时共： " + (endTime - startTime) + "ms");
    }

```

#### 其次，输入查询索引参数：
示例：
```
-tm vector -tbn [索引名称] -qf [查询文件的路径] -m single -r 0.1 -issearchoptimization true
```
```

-tm [tableManager名称]
-tbn [索引名称] 
-qf [查询文件的路径]
-m [查询模式：single、batch，默认single]
-qn [查询文件读入的数据量]
-r [查询半径，默认r=0.1]
-h [帮助文档]
-issearchmod [是否进行范围查询优化，默认为true]

```

其中，完全线性划分模块新添的查询索引的参数如下所示：
```
-issearchmod [是否进行范围查询优化，默认为true]
```
此外，索引存放路径为当前路径，输入的索引名称不包括文件后缀和文件路径


#### 最后，执行查询过程  executeIndexQuery()。

    
    